### 微服务的十个设计要点

#### (一): 负载均衡+API网关

```bash
在实施微服务的过程中，不免要面临服务的聚合与拆分，当后端服务的拆分相对比较频繁的时候，作为手机 App 来讲，往往需要一个统一的入口，将不同的请求路由到不同的服务，无论后面如何拆分与聚合，对于手机端来讲都是透明的。

有了 API 网关以后，简单的数据聚合可以在网关层完成，这样就不用在手机 App 端完成，从而手机 App 耗电量较小，用户体验较好。

有了统一的 API 网关，还可以进行统一的认证和鉴权，尽管服务之间的相互调用比较复杂，接口也会比较多，API 网关往往只暴露必须的对外接口，并且对接口进行统一的认证和鉴权，使得内部的服务相互访问的时候，不用再进行认证和鉴权，效率会比较高。
```

---

#### (二):无状态化与独立有状态集群

```bash

```

---

#### (三):数据库的横向扩展

```bash

```

---

#### (四)：缓存

```bash

```



#### (五):服务拆分与服务发现

```bash
# 1. 服务拆分
服务拆分之后，开发独立，上线独立，简化扩容
# 2. 服务发现
当拆分完毕以后，应用之间的关系就更加复杂了，因而需要服务发现的机制，来管理应用相互的关系，实现自动的修复，自动的关联，自动的负载均衡，自动的容错切换。
一般使用golang实现的consul作为服务发现
```

---

####(六):服务编排与弹性伸缩

```bash
当服务拆分了，进程就会非常的多，因而需要服务编排来管理服务之间的依赖关系。

```

---

#### (七):统一的配置中心

```bash
服务拆分以后，服务的数量非常多，如果所有的配置都以配置文件的方式放在应用本地的话，非常难以管理，可以想象当有几百上千个进程中有一个配置出现了问题，是很难将它找出来的，因而需要有统一的配置中心，来管理所有的配置，进行统一的配置下发。
```

---

#### (八):统一日志中心

```bash
fluentd采集，kafka做消息队列，然后写入elasticsearch,然后grafana出图展示
```

---

#### (九):熔断、限流、降级

```bash

```

---

#### (十) :全方位的监控

```bash
服务器性能监控:CPU、内存、网卡、磁盘、TCP......
应用性能监控:JVM堆内存、GC、Thread、CPU利用率、Method性能......
业务指标监控:下单数、支付数、购物车请求数......
调用链路监控:RT、TPS、Exception......
底层组件监控:RT、TPS、连接数、连接状态、消息积压、zk节点数......
系统异常监控:流量监测、Exception log、服务线程数、异常报警......
```

